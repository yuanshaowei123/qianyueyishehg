
<style>
    .role-list {
        padding: 20px;
    }
    .role-list li {
        background-color: #eee;
        padding: 10px 30px;
        margin-bottom: 10px;
    }
    .role-list li a {
        float: right;
        display: block;
        margin-top: 0px;
    }
    #setPermissions h3 {
        margin:0;
    }
    #setPermissions label {
        margin-bottom: 10px;
    }
    .maintitle h2 {
        margin: 0;
    }
    .maintitle span {
        margin-top: 5px;
    }
    .editArea {
        border: 1px solid #bbb;
        padding: 15px 15px 0;
        margin-bottom: 10px;
    }
    .editArea label {
        margin-right: 10px;
    }
    .subtitle {
        display: block;
        width: 15%;
        /*border-bottom: 1px solid #bbb;*/
        /*padding-bottom: 5px;*/
    }
    .subtitle span {
        margin-top: 3px;
    }
    .option_content {
        margin: 0 0 10px 10px!important;
    }
</style>
<div class="col-md-12">
    <!-- BEGIN PORTLET-->
    <div class="portlet light portlet-fit" style="margin-bottom: 0;min-height: 600px;">
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-directions font-green hide"></i>
                <span class="caption-subject bold font-dark uppercase">角色列表</span>
            </div>
            <div class="actions" style="float: right;margin-right: 50px;">
                <div class="btn-group btn-group-devided" data-toggle="buttons">
                    <button type="button" class="btn btn-circle btn-primary" data-toggle="modal" href="#addRole">
                        添加角色
                    </button>
                </div>
            </div>
        </div>
        <div class="portlet-body clearfix">
            <ul class="col-md-9 role-list">
                <li>
                    <span>系统默认角色</span>
                    <a href="#setPermissions" data-toggle="modal" >设置权限</a>
                </li>
                <li>
                    <span>院长</span>
                    <a href="#setPermissions" data-toggle="modal" >设置权限</a>
                </li>
                <li>
                    <span>区长</span>
                    <a href="#setPermissions" data-toggle="modal" >设置权限</a>
                </li>
                <li>
                    <span>管理员</span>
                    <a href="#setPermissions" data-toggle="modal" >设置权限</a>
                </li>
            </ul>
        </div>
        <hr style="margin-top: 0">
        <div id="pagetoolbar" class="">
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-6 text-right">
                    <div class="">
                        <ul id="nav_list_pagetoolbar" class="pagination pagination_custom" unselectable="on"
                            style="user-select: none;">
                            <li class="active"><a id="nav_item_pagetoolbar_1" href="javascript:void(0);"
                                                  title="Page 1 of 1">1</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="addRole" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog add-role">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">新建角色</h4>
            </div>
            <div class="modal-body" style="">
                <form class="form-horizontal" role="form">
                    <div class="form-body">
                        <div class="form-group">
                            <label class="col-md-4 control-label">角色名称</label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" placeholder="请输入" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">角色描述</label>
                            <div class="col-md-6">
                                <!--<input type="text" class="form-control" placeholder="请输入" value="">-->
                                <textarea rows="6" cols="30" style="width: 100%;"></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">关闭</button>
                <button type="button" class="btn green">确定</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="setPermissions" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog" style="width: 1100px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">设置权限</h4>
            </div>
            <div class="modal-body" style="">
                <form class="form-horizontal" role="form">
                    <div class="form-body">
                        <ul>
                            <li>
                                <!--  医生 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>医生</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增医生
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>删除医生
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>编辑医生信息
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 居民 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>居民</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>已签约</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>签约/添加家庭成员
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>慢病数据新增
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>慢病数据修改删除
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>健康档案修改
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>居民巡诊数据修改删除
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>删除居民
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>签约协议打印
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>居民随访数据修改删除
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>未签约居民删除
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>家庭病床
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>居民信息修改（更换团队，手机号修改，姓名修改，服务包修改，既往史修改，特殊人群修改）
                                        <span></span>
                                    </label>
                                </div>

                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>未签约</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 家庭病床 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>家庭病床</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>查看待审核建床资料
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>审核家庭病床
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增巡诊记录
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增阶段小结
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增医嘱
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 团队 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>团队</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增团队
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>编辑团队
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>修改负责人
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>查看成员
                                        <span></span>
                                    </label>
                                </div></li>
                            <li>
                                <!-- 服务设置 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>服务设置</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>服务设置</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                </div>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>服务包</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务包新增
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务包编辑
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务包详情查看
                                        <span></span>
                                    </label>
                                </div>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>服务项</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务项新增
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务项编辑
                                        <span></span>
                                    </label>
                                </div>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>服务项类别</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务项类别新增
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>服务项类别编辑
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 在线咨询 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>在线咨询</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>在线咨询回复
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 资讯 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>资讯</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>资讯新增
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>资讯编辑修改
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 区域 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>区域</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>社区</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增社区
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>社区编辑修改
                                        <span></span>
                                    </label>
                                </div>
                                <div class="editArea">
                                    <label class="mt-checkbox subtitle">
                                        <h3>小区</h3>
                                        <input type="checkbox"/>
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>新增小区
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>小区编辑修改
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <!-- 考核统计 -->
                                <label class="mt-checkbox maintitle">
                                    <h2>考核统计</h2>
                                    <input type="checkbox"/>
                                    <span></span>
                                </label>
                                <div class="editArea">
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>查看区域概览
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>查看社区中心概览
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>查看团队统计
                                        <span></span>
                                    </label>
                                    <label class="mt-checkbox option_content">
                                        <input type="checkbox"/>查看患者统计
                                        <span></span>
                                    </label>
                                </div>
                            </li>
                        </ul></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">关闭</button>
                <button type="button" class="btn green">确定</button>
            </div>
        </div>
    </div>
</div>
<script>
    /* maintitle为主标题;subtitle为副标题;option_content为普通选项; */
    /* 主标题点击事件 */
    $(".maintitle input[type=checkbox]").on("click", function() {
        if($(this)[0].checked == true) {
            /* 点击选中主标题，主标题所包含的所有副标题以及选项全都选中 */
            var checkboxs = $(this).parent().parent().find("input[type=checkbox]");
            for(var i = 0; i < checkboxs.length; i++) {
                checkboxs[i].checked = true;
            }
        } else {
            /* 点击取消主标题，主标题所包含的所有副标题以及选项全都取消 */
            var checkboxs = $(this).parent().parent().find("input[type=checkbox]");
            for(var i = 0; i < checkboxs.length; i++) {
                checkboxs[i].checked = false;
            }
        }
    });

    /* 副标题点击事件 */
    $(".subtitle input[type=checkbox]").on("click", function() {
        if($(this)[0].checked == true) {
            /* 点击选中副标题，副标题所包含的所有选项全都选中 */
            var checkboxs = $(this).parent().parent().find("input[type=checkbox]");
            for(var i = 0; i < checkboxs.length; i++) {
                checkboxs[i].checked = true;
            }

            /* 点击选中副标题，主标题选中 */
            var checkbox_main = $(this).parent().parent().parent().find("input[type=checkbox]");
            if(checkbox_main.length != 0) {
                checkbox_main[0].checked = true;
            }
        } else {
            /* 点击取消副标题，副标题所包含的所有选项全都取消 */
            var checkboxs = $(this).parent().parent().find("input[type=checkbox]");
            for(var i = 0; i < checkboxs.length; i++) {
                checkboxs[i].checked = false;
            }
            /*取消副标题时，判断同一个主标题中其他副标题是否全部是未选中选中状态*/
            var checkflag = true;
            var all_sub_checkboxs = $(this).parent().parent().parent().find(".subtitle input[type=checkbox]");
            for(var j = 0; j< all_sub_checkboxs.length; j++) {
                if(all_sub_checkboxs[j].checked) {
                    checkflag = false;
                    break;
                }
            }
            /*如果当前取消的是最后一个副标题，则取消主标题的选中状态*/
            if(checkflag) {
                var checkbox_main = $(this).parent().parent().parent().find(".maintitle input[type=checkbox]");
                if(checkbox_main.length != 0) {
                    checkbox_main[0].checked = false;
                }
            }
        }
    });

    /*普通选项点击事件*/
    $(".option_content input[type=checkbox]").on("click", function() {
        var bool = $(this)[0].checked;
        if(bool) {
            /* 当第一次点击选中某一个标题内的普通选项时，连带勾上副标题以及主标题 */
            var checkbox_sub = $(this).parent().parent().find(".subtitle input[type=checkbox]");
            var checkbox_main = $(this).parent().parent().parent().find(".maintitle input[type=checkbox]");
            if(checkbox_sub.length != 0) {
                checkbox_sub[0].checked = true;
            }
            if(checkbox_main.length != 0) {
                checkbox_main[0].checked = true;
            }
        } else {
            /*点击取消时，判断该选项所在副标题中的所有选项的选中状态*/
            var flag = true
            var checkbox_opt = $(this).parent().parent().find(".option_content input[type=checkbox]");
            for(var i = 0; i < checkbox_opt.length; i++) {
                if(checkbox_opt[i].checked) {
                    flag = false;
                    break;
                }
            }
            if(flag) {
                /*取消副标题的选中状态*/
                var checkbox_sub = $(this).parent().parent().find(".subtitle input[type=checkbox]");
                if(checkbox_sub.length != 0) {
                    checkbox_sub[0].checked = false;
                }
                /*判断主标题中的副标题是否为选中状态*/
                var checkflag = true;
                var all_sub_checkboxs = $(this).parent().parent().parent().find(".subtitle input[type=checkbox]");
                for(var j = 0; j< all_sub_checkboxs.length; j++) {
                    if(all_sub_checkboxs[j].checked) {
                        checkflag = false;
                        break;
                    }
                }

                /*点击取消某一选项时，如果该选项是副标题中最后一个选项时，同时取消副标题，如果该副标题是主标题中最后一个选中的标题时，同时取消主标题*/
                if(checkflag) {
                    var checkbox_main = $(this).parent().parent().parent().find(".maintitle input[type=checkbox]");
                    if(checkbox_main.length != 0) {
                        checkbox_main[0].checked = false;
                    }
                }
            }
        }
    });
</script>