<style>
    .team_name {
        max-width: 200px;
    }
    .team_name span {
        display: block;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
    .gzt_table tr td {
        padding: 25px 10px!important;
    }

    .xzxq {
        padding-top: 50px;
    }
    .xzxq.special {
        padding: 0;
    }
    .xzxq ul li {
        border-bottom: 1px solid #f0f4f7;
    }
    .xzxq ul li a {
        color: #93a3b5;
        font-size: 16px;
        font-weight: 400;
        cursor: default;
    }
    .xzxq .xzjl {
        padding: 10px;
        min-height: 100px;
        margin-top: 5px;
    }
    .xzxq .value {
        color: #000;
    }
    .xzxq .xzcy_contents {
        display: inline-block;
        width: 100%;
    }
    .xzxq .xzcy_contents p {
        margin-bottom: 0;
    }
    .xzxq .xzcy_contents p:first-child {
        max-width: 75%;
    }
    .xzxq .imgs_area {
        margin-top: 30px;
    }
    .ok_button,
    .cancel_button {
        padding: 5px 10px;
        background-color: #41cac0;
        color: #fff;
        outline: none;
        border: 0;
    }
    small{
        float: right;
        margin-right: 30px;
        line-height: 34px;
    }
    .no_reply{
        color: red!important;
    }
    .reply{
        color:#78CD51!important;
    }
    .select_div .select2-selection {
        outline: none;
    }
</style>
<div class="col-md-12">
    <!-- BEGIN PORTLET-->
    <div class="portlet light portlet-fit" style="margin-bottom: 0;min-height: 700px;">
        <div class="portlet-title" style="padding: 30px 0px 0px!important;border-bottom: 1px solid #eee;">
            <form class="form-horizontal" role="form" method="get" id="searchform" action="/Patient/List">
                <div class="form-group item">
                    <label class="control-label">状态</label>
                    <div>
                        <select class="form-control state" id="Status" name="Status">
                            <option value>--请选择--</option>
                            <option value="0">未回复</option>
                            <option value="1">已回复</option>
                        </select>
                    </div>
                </div>
                <div class="form-group item">
                    <label class="control-label" style="vertical-align: top;">咨询日期</label>
                    <div id="dataPicker_zxzx" class="input-group input-large date-picker input-daterange"
                         data-date="2016-08-31"
                         data-date-format="yyyy-mm-dd" data-date-minviewmode="months">
                        <input type="text" class="form-control" name="from1" value="" style="width: 150px;">
                        <span  style="width: 20px; float: left;display: inline-block;text-align: center;height: 34px;line-height: 34px;"> - </span>
                        <input type="text" class="form-control" name="to1" value="" style="width: 150px;">
                    </div>
                </div>
                <div class="form-group item">
                    <label class="control-label">团队</label>
                    <div class="select_div">
                        <select class="form-control js-example-basic-single" id="Team" name="Team">
                            <option value>-- 请选择 --</option>
                            <option value="0">黑芝麻信息团队</option>
                            <option value="1">陈利团队</option>
                        </select>
                    </div>
                </div>
                <div class="form-group item">
                    <button type="button" class="btn btn-success" style="margin-left: 15px;" onclick="search()">搜索</button>
                </div>
                <small>当前搜索记录：22</small>
            </form>
        </div>
        <div class="portlet-body">
            <div class="table-scrollable table-scrollable-borderless">
                <table class="table table-hover table-light gzt_table">
                    <thead>
                    <tr class="uppercase">
                        <th>居民</th>
                        <th>性别</th>
                        <th>年龄</th>
                        <th>社区</th>
                        <th>归属团队</th>
                        <th>联系电话</th>
                        <th>咨询时间</th>
                        <th>未回复</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>付华</td>
                        <td>男</td>
                        <td>25</td>
                        <td>虹桥社区</td>
                        <td class="team_name">
                                <span>
                                    崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队
                                </span>
                        </td>
                        <td>13912342234</td>
                        <td>2017年10月11日</td>
                        <td class="no_reply">未回复</td>
                        <td>
                            <a class="dashboard-stat-v2-new detail_btn" style="margin-top: 0px;">查看详情</a>
                        </td>
                    </tr>
                    <tr>
                        <td>付华</td>
                        <td>男</td>
                        <td>25</td>
                        <td>运河社区</td>
                        <td class="team_name">
                                <span>
                                    崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队崔健团队
                                </span>
                        </td>
                        <td>13912342234</td>
                        <td>2017年10月11日</td>
                        <td class="reply">已回复</td>
                        <td>
                            <a class="dashboard-stat-v2-new detail_btn" style="margin-top: 0px;">查看详情</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <hr style="margin-top: 0">
            <div id="pagetoolbar" class="">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-6 text-right">
                        <div class="">
                            <ul id="nav_list_pagetoolbar" class="pagination pagination_custom" unselectable="on"
                                style="user-select: none;">
                                <li class="active">
                                    <a id="nav_item_pagetoolbar_1" href="javascript:void(0);"
                                       title="Page 1 of 1">1</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>  

<a href="javascript:;" class="sidebar_close_icon" style="position: absolute">
    <i class="icon-close"></i>
</a>
<div class="sidebar-area page-quick-sidebar-wrapper-new" data-close-on-body-click="true" style="background-color: #fff;position: absolute;">
    <div class="page-quick-sidebar"  style="background-color: #fff;">
        <div class="xzxq" style="padding: 20px 50px;">
            <ul class="onlineConsulting nav">
                <li>
                    <a href="javascript:;">
                        <div class="float-right value">2017-08-15 20：07</div>
                        <div>咨询时间</div>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <div class="float-right value">杨梅</div>
                        <div>居民</div>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <div>咨询内容</div>
                        <div class="xzjl value">
                            咨询内容咨询内容咨询内容咨询内容咨询内容咨询内容咨询内容咨询内容
                        </div>
                    </a>
                </li>
                <li class="imgs_area clearfix">
                    <p class="col-md-12">
                        <a class="mt-body-img" style="background-image: url(../images/fwb_wksk.png)" data-toggle="modal"
                           href="#onlineConsultingImg"></a>
                        <a class="mt-body-img" style="background-image: url(../images/fwb_wgl.png)" data-toggle="modal"
                           href="#onlineConsultingImg"></a>
                        <a class="mt-body-img" style="background-image: url(../images/fwb_jkgl.png)" data-toggle="modal"
                           href="#onlineConsultingImg"></a>
                        <a class="mt-body-img" style="background-image: url(../images/fwb_jkgl.png)" data-toggle="modal"
                           href="#onlineConsultingImg"></a>
                    </p>
                </li>
                <li>
                    <a href="javascript:;">
                        <textarea placeholder="回复" style="width: 100%;height: 50px;" onfocus="replyAreaFocus(this)" onblur="replyAreaBlur(this)"></textarea>
                        <button type="button" class="ok_button" style="display: none">回复</button>
                        <button  type="button" class="cancel_button" style="display: none" onclick="cancelReply(this)">取消</button>
                    </a>
                </li>
                <li>
                    <a href="javascript:;" style="background-color: #eee;margin-top: 20px;">
                        <p><span>后台回复</span>：<span>已经电话回复已经电话回复已经电话回复已经电话回复已经电话回复已经电话回复</span></p>
                        <p style="text-align: right;">2017-08-15 20：07</p>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
<div style="clear: both"></div>

<div class="modal fade in" id="onlineConsultingImg" tabindex="-1" role="onlineConsultingImg" aria-hidden="true"
     style="display: none; padding-right: 17px;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <img class="modalImg" src="">
            </div>
        </div>
    </div>
</div>

<script src="../assets/layouts/global/scripts/quick-sidebar.js" type="text/javascript"></script>
<script src="../assets/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>
<script>
    //时间筛选框初期化
    var date = new Date();
    var m = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" +  date.getDate();
    var n = "2016-08-31";
    var fromTime = $("input[name='from1']");
    var toTime = $("input[name='to1']");
    fromTime.val(n);
    toTime.val(m);

    $('#dataPicker_zxzx').datepicker({
        rtl: false,
        orientation: "left",
        autoclose: true,
        startDate: "2016-08-31",
        endDate: m
    });

    smallImg = $(".imgs_area");
    bigImg = $(".modalImg");
    var pa = /.*\((.*)\)/;

    smallImg.on("click", "a", function () {
        bigImg.attr("src", this.getAttribute("style").match(pa)[1]);
        console.log(this.getAttribute("style").match(pa)[1]);
    });

    //点击查看详情按钮
    $("#zxzx .detail_btn").on("click", function() {
        $("#zxzx .sidebar-area").toggleClass("active");
        $("#zxzx .sidebar_close_icon").css("display", "inline-block");
        $(this).parent().parent().addClass("checked");
        if($("#zxzx .sidebar-area").hasClass("active")) {
            var height1 = $("#zxzx .xzxq").css("height");
            var height2 = $("#zxzx .portlet").css("height");
            var height11 = parseInt(height1);
            var height22 = parseInt(height2);
            if(height11 > height22) {
                $("#zxzx .sidebar-area").css("overflow-y", "scroll");
            } else {
                $("#zxzx .sidebar-area").css("overflow-y", "hidden");
            }
        }
    });

    // 点击详情弹出框以外的的区域隐藏弹出框
    $(document).click(function(){
        if($("#zxzx .sidebar-area").hasClass("active")){
            $("#zxzx .sidebar-area").toggleClass("active");
            $("#zxzx .sidebar_close_icon").css("display", "none");
            $("#zxzx tr.checked").removeClass("checked");
        }
    });
    //点击详情弹出框时阻止隐藏事件
    $("#zxzx .sidebar-area").click(function(event){
        event.stopPropagation();
    });
    //点击查看详情按钮时阻止隐藏事件
    $("#zxzx .detail_btn").click(function(event){
        event.stopPropagation();
    });

    $("#zxzx .sidebar_close_icon").click(function (e) {
        $("#zxzx .sidebar-area").toggleClass("active");
        $("#zxzx .sidebar_close_icon").css("display", "none");
        $("#zxzx tr.checked").removeClass("checked");
    });

    //点击回复框
    function replyAreaFocus(e) {
        $(e).attr("placeholder", "");
        $(e).parent().find(".ok_button").css("display", "inline-block");
        $(e).parent().find(".cancel_button").css("display", "inline-block");
        $(e).css("height", "90px");
    }
    //回复框失去焦点进行判断内容是否为空
    function replyAreaBlur(e) {
        var text = $(e)[0].value;
        if(text == "") {
            $(e).attr("placeholder", "回复");
            $(e).parent().find(".ok_button").css("display", "none");
            $(e).parent().find(".cancel_button").css("display", "none");
            $(e).css("height", "50px");
        }
    }

    //点击回复框的取消按钮
    function cancelReply(e) {
        $(e).parent().find("textarea")[0].value = "";
        $(e).parent().find("textarea").attr("placeholder", "回复");
        $(e).parent().find(".ok_button").css("display", "none");
        $(e).parent().find(".cancel_button").css("display", "none");
        $(e).parent().find("textarea").css("height", "50px");
    }

    //    监控审核查询
    $('.state').bind('input propertychange', function() {
        console.log($(this).val());//value 值
        console.log($(this).find("option:selected").text());//获取当前选中的text值
    });

    $(function () {

        /* 下拉框可以被搜索 */
        $('.js-example-basic-single').select2({
            language:'zh-CN'
        });
        $('.select_div').find(".select2 ").addClass("form-control");
    })
</script>