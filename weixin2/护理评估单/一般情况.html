<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=0.5,user-scalable=0">
    <title>一般情况</title>
    <link rel="stylesheet" href="../css/weui.min.css"/>
    <link rel="stylesheet" href="../css/f.css"/>
    <link rel="stylesheet" href="../css/一般情况.css"/>
</head>
<body ontouchstart>
<div class="container">

    <!-- 评估日期 -->
    <div class="weui-cells top-cells">
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__hd">
                <img class="date-icon" src="" alt="" style="display: inline-block; vertical-align: top;" />
                <h4 style="display: inline-block">评估日期</h4>
            </div>
            <div class="weui-cell__bd">
                <input class="weui-input assessmentDate" type="date" placeholder="" value="2011-01-04" style="width: 90%;text-align: right;"/>
            </div>
            <div class="weui-cell__ft" style="text-align: left">

            </div>
        </div>
    </div>

    <!-- 资料来源 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>资料来源</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="patient">病人</label>
                        <input type="checkbox" name="checkbox" id="patient" value="病人" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="dependents">家属</label>
                        <input type="checkbox" name="checkbox" id="dependents" value="家属" />
                    </div>
                    <div class="weui-flex__item">
                        <label for=" friend">朋友</label>
                        <input type="checkbox" name="checkbox" id=" friend" value="朋友" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="other-person1">其他</label>
                        <input type="checkbox" name="checkbox" id="other-person1" value="其他" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 婚姻状况 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>婚姻状况</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="married" class="weui-flex__item">已婚</label>
                        <input type="checkbox" name="checkbox" id="married" value="已婚" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="unmarried" class="weui-flex__item">未婚</label>
                        <input type="checkbox" name="checkbox" id="unmarried" value="未婚" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="divorce" class="weui-flex__item">离异</label>
                        <input type="checkbox" name="checkbox" id="divorce" value="离异" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="lonely" class="weui-flex__item">孤寡</label>
                        <input type="checkbox" name="checkbox" id="lonely" value="孤寡" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 家庭成员 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>家庭成员</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="parent" class="weui-flex__item">父母</label>
                        <input type="checkbox" name="checkbox1" id="parent" value="父母" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="living-alone" class="weui-flex__item">独居</label>
                        <input type="checkbox" name="checkbox1" id="living-alone" value="独居" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="spouse" class="weui-flex__item">配偶</label>
                        <input type="checkbox" name="checkbox1" id="spouse" value="配偶" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="son" class="weui-flex__item">儿子</label>
                        <input type="checkbox" name="checkbox1" id="son" value="儿子" />
                    </div>
                </div>
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="daughter" class="weui-flex__item">女儿</label>
                        <input type="checkbox" name="checkbox1" id="daughter" value="女儿" />
                    </div>
                    <div class="weui-flex__item other">
                        <label for="other-person2" class="weui-flex__item">其他</label>
                        <input type="checkbox" class="other-checkbox" name="checkbox1" id="other-person2" value="其他" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
                <div class="weui-flex other-text">
                    <div class="weui-flex__item">
                        <input type="text" name="text" placeholder="请填写家庭成员"/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 教育程度 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>教育程度</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="illiteracy" class="weui-flex__item">文盲</label>
                        <input type="checkbox" name="checkbox" id="illiteracy" value="文盲" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="primary-school" class="weui-flex__item">小学</label>
                        <input type="checkbox" name="checkbox" id="primary-school" value="小学" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="middle-school" class="weui-flex__item">中学</label>
                        <input type="checkbox" name="checkbox" id="middle-school" value="中学" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="college-above" class="weui-flex__item">大专以上</label>
                        <input type="checkbox" name="checkbox" id="college-above" value="大专以上" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 健康知识水平 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>健康知识水平</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="ignorance" class="weui-flex__item">无知</label>
                        <input type="checkbox" name="checkbox" id="ignorance" value="无知" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="general1" class="weui-flex__item">一般</label>
                        <input type="checkbox" name="checkbox" id="general1" value="一般" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="higher" class="weui-flex__item">较高</label>
                        <input type="checkbox" name="checkbox" id="higher" value="较高" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 职业 -->
    <div class="weui-cells top-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <img class="input-icon" src="" alt="" />
                <h4 style="display: inline-block">职业</h4>
            </div>
            <div class="weui-cell__bd">
                <input id=" profession" class="weui-input" type="text" placeholder="" style="text-align: right;">
            </div>
        </div>
    </div>

    <!-- 民族 -->
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <img class="input-icon" src="" alt="" />
                <h4 style="display: inline-block">民族</h4>
            </div>
            <div class="weui-cell__bd">
                <input id="nation" class="weui-input" type="text" placeholder="" style="text-align: right;">
            </div>
        </div>
    </div>

    <!-- 籍贯 -->
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <img class="input-icon" src="" alt="" />
                <h4 style="display: inline-block">籍贯</h4>
            </div>
            <div class="weui-cell__bd">
                <input id="native-place" class="weui-input" type="text" placeholder="" style="text-align: right;">
            </div>
        </div>
    </div>

    <!-- 经济来源 -->
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <img class="input-icon" src="" alt="" />
                <h4 style="display: inline-block">经济来源</h4>
            </div>
            <div class="weui-cell__bd">
                <input id="economic-source" class="weui-input" type="text" placeholder="" style="text-align: right;">
            </div>
        </div>
    </div>

    <!-- 嗜好 -->
    <div class="weui-cells top-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>嗜好</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="nothing" class="weui-flex__item">无</label>
                        <input type="checkbox" name="checkbox" id="nothing" value="无" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="smoke" class="weui-flex__item">烟</label>
                        <input type="checkbox" name="checkbox" id="smoke" value="烟" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="alcohol" class="weui-flex__item">酒</label>
                        <input type="checkbox" name="checkbox" id="alcohol" value="酒" />
                    </div>
                    <div class="weui-flex__item other">
                        <label for="other1" class="weui-flex__item">其他</label>
                        <input type="checkbox" class="other-checkbox" name="checkbox" id="other1" value="其他" />
                    </div>
                </div>
                <div class="weui-flex other-text">
                    <div class="weui-flex__item">
                        <input type="text" name="text" placeholder="请填写嗜好" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 饮食 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>饮食</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="salty" class="weui-flex__item">偏咸</label>
                        <input type="checkbox" name="checkbox" id="salty" value="偏咸" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="light" class="weui-flex__item">偏淡</label>
                        <input type="checkbox" name="checkbox" id="light" value="偏淡" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="sweet" class="weui-flex__item">偏甜</label>
                        <input type="checkbox" name="checkbox" id="sweet" value="偏甜" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="greasy" class="weui-flex__item">偏肥腻</label>
                        <input type="checkbox" name="checkbox" id="greasy" value="偏肥腻" />
                    </div>
                </div>
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="no-preference" class="weui-flex__item">无偏好</label>
                        <input type="checkbox" name="checkbox" id="no-preference" value="无偏好" />
                    </div>
                    <div class="weui-flex__item other">
                        <label for="other2" class="weui-flex__item">其他</label>
                        <input type="checkbox" class="other-checkbox" name="checkbox" id="other2" value="其他" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
                <div class="weui-flex other-text">
                    <div class="weui-flex__item">
                        <input type="text" name="text" placeholder="请填写偏好口味" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 家居环境 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>家居环境</h4>
            </div>
            <div class="weui-cell__ft">
            </div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="neat1" class="weui-flex__item">整洁</label>
                        <input type="checkbox" name="checkbox" id="neat1" value="整洁" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="messy1" class="weui-flex__item">凌乱</label>
                        <input type="checkbox" name="checkbox" id="messy1" value="凌乱" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="elevator1" class="weui-flex__item">电梯</label>
                        <input type="checkbox" name="checkbox" id="elevator1" value="电梯" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="non-elevator" class="weui-flex__item">非电梯</label>
                        <input type="checkbox" name="checkbox" id="non-elevator" value="非电梯" />
                    </div>
                </div>
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="pedestal-toilet" class="weui-flex__item">坐厕</label>
                        <input type="checkbox" name="checkbox" id="pedestal-toilet" value="坐厕" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="squat-toilet" class="weui-flex__item">蹲厕</label>
                        <input type="checkbox" name="checkbox" id="squat-toilet" value="蹲厕" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="public-toilets" class="weui-flex__item">公厕</label>
                        <input type="checkbox" name="checkbox" id="public-toilets" value="公厕" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 空气流通 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>空气流通</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="neat2" class="weui-flex__item">整洁</label>
                        <input type="checkbox" name="checkbox" id="neat2" value="整洁" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="messy2" class="weui-flex__item">凌乱</label>
                        <input type="checkbox" name="checkbox" id="messy2" value="凌乱" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="elevator2" class="weui-flex__item">电梯</label>
                        <input type="checkbox" name="checkbox" id="elevator2" value="电梯" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 活动空间 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>活动空间</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="spacious" class="weui-flex__item">宽敝</label>
                        <input type="checkbox" name="checkbox" id="spacious" value="宽敝" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="narrow" class="weui-flex__item">狭窄</label>
                        <input type="checkbox" name="checkbox" id="narrow" value="狭窄" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 光线 -->
    <div class="weui-cells">
        <div class="weui-cell title">
            <div class="weui-cell__hd"><img src="" alt=""></div>
            <div class="weui-cell__bd">
                <h4>光线</h4>
            </div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell selection-area">
            <div class="weui-cell__bd">
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        <label for="adequate" class="weui-flex__item">充足</label>
                        <input type="checkbox" name="checkbox" id="adequate" value="充足" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="weak" class="weui-flex__item">微弱</label>
                        <input type="checkbox" name="checkbox" id="weak" value="微弱" />
                    </div>
                    <div class="weui-flex__item">
                        <label for="general2" class="weui-flex__item">一般</label>
                        <input type="checkbox" name="checkbox" id="general2" value="一般" />
                    </div>
                    <div class="weui-flex__item">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 居住面积 -->
    <div class="weui-cells top-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <img class="input-icon" src="" alt="" />
                <h4 style="display: inline-block">居住面积(平方)</h4>
            </div>
            <div class="weui-cell__bd">
                <input id=" living-space" class="weui-input" type="text" placeholder="" style="text-align: right;">
            </div>
        </div>
    </div>

    <!-- 离机构时间 -->
    <div class="weui-cells last-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <img class="input-icon" src="" alt="" />
                <h4 style="display: inline-block">离医疗机构时间(小时)</h4>
            </div>
            <div class="weui-cell__bd">
                <input id="time" class="weui-input" type="text" placeholder="" style="text-align: right;">
            </div>
        </div>
    </div>

    <div class="weui-btn-rea fix_btn">
        <a class="weui-btn weui-btn_primary">保存</a>
    </div>
</div>
<script src="../js/zepto.min.js"></script>
<script>

    $(function () {
        cal();

        //初期化评估日期
        var date = new Date();
        var mon = date.getMonth() + 1;
        var day = date.getDate();
        var nowDay = date.getFullYear() + "-" + (mon<10?"0"+mon:mon) + "-" +(day<10?"0"+day:day);
        $(".assessmentDate").val(nowDay);
    });
    //监控屏幕小大变化
    window.onresize = function(){
        cal();
    };
    //改变rem值
    function cal() {
        if(screen.width < 1080) {
            //通过window.screen.width获取屏幕的宽度
            var width = screen.width * 2;
            var zoom = (width/750) * 2.8;
            $("input[type=checkbox]").css("zoom", zoom);

            var offWidth = width / 25; //这里用宽度/30表示1rem取得的px
            document.getElementsByTagName("html")[0].style.fontSize = offWidth + 'px'; //把rem的值复制给顶级标签html的font-size
        }
    };
    //点击保存
    $(".fix_btn a").on("click", function () {
        location.href = "护理评估单.html"
    });
    //获取checkbox选中的值
    function getCheckboxValues($self) {
        var checkBoxs = $self.parent().find(".selection-area input[type=checkbox]");
        var html;
        var str = "";
        var count = 0;
        var value = "";
        for(var i = 0; i < checkBoxs.length; i++) {
            var checkbox = checkBoxs[i];
            if(checkbox.checked) {
                if ($(checkbox).hasClass("other-checkbox")) {
                    var value = $(checkbox).parent().parent().parent().find("div[class $= '-text'] input[type=text]").val();
                    if(value != "") {
                        count ++;
                        if(count == 1) {
                            str += checkbox.value + "(" + value + ")";
                        } else {
                            str += "," + checkbox.value + "(" + value + ")";
                        }
                    } else {
                        count ++;
                        if(count == 1) {
                            str += checkbox.value;
                        } else {
                            str += "," + checkbox.value;
                        }
                    }
                    continue;
                }
                if(checkbox.value != "") {
                    count ++;
                    if(count == 1) {
                        str += checkbox.value;
                    } else {
                        str = str + ", " + checkbox.value;
                    }
                }
            }
        }
        html = "<span style='display: inline-block;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;'>" +
                str + "</span>"
        return html;
    };
    //展开、关闭标签，关闭时把选中的值显示在右上角
    $(".title").on("click", function () {
        var $self = $(this);
        var display = $self.parent().find(".selection-area").css("display");
        if( display == "none") {
            $self.find(".weui-cell__ft").html("");
            $self.parent().find(".selection-area").show();
        } else {
            var html = getCheckboxValues($self);
            $self.find(".weui-cell__ft").html(html);
            $self.parent().find(".selection-area").hide();
        }
    });
    //设置checkbox框为单选
    $('input[name=checkbox]').click(function(){
        $this = $(this);
        if($this[0].checked) {
            var checkboxs = $this.parent().parent().parent().find("input[name=checkbox]");
            for(var i = 0; i< checkboxs.length; i++) {
                if(checkboxs[i].checked) {
                    checkboxs[i].checked = false;
                }
            }
            $this[0].checked = true;
        }
    });
    //点击checkbox"其他"，显示文本框
    $(".other").on("click", function() {
        $this = $(this);
        if($this.find("input[type=checkbox]")[0].checked) {
            $this.parent().parent().find(".other-text").show();
        } else {
            $this.parent().parent().find(".other-text").hide();
        }
    })
</script>
</body>
</html>
